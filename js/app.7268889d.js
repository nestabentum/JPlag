(function(){"use strict";var e={768:function(e,t,s){var i=s(9963),n=s(6252);const o=(0,n._)("meta",{content:"width=device-width, initial-scale=1, shrink-to-fit=no",name:"viewport"},null,-1);function a(e,t){const s=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)(n.HY,null,[o,(0,n.Wm)(s)],64)}var l=s(3744);const r={},c=(0,l.Z)(r,[["render",a]]);var d=c,u=s(2201),m=s(3577),p=s(5174);const h=e=>((0,n.dD)("data-v-4854b4d1"),e=e(),(0,n.Cn)(),e),g={class:"container"},f={class:"column-container",style:{width:"30%"}},b=h((()=>(0,n._)("h1",null,"JPlag Report",-1))),_=h((()=>(0,n._)("p",{class:"section-title"},"Main Info:",-1))),v={id:"basicInfo"},w=["title"],S=h((()=>(0,n._)("div",{id:"logo-section"},[(0,n._)("img",{id:"logo",alt:"JPlag",src:p})],-1))),y={class:"column-container",style:{width:"35%"}},I={id:"metrics"},C=h((()=>(0,n._)("p",{class:"section-title"},"Metric:",-1))),k={id:"metrics-list"},F=h((()=>(0,n._)("p",{class:"section-title"},"Distribution:",-1))),D={class:"column-container",style:{width:"35%"}},M=h((()=>(0,n._)("p",{class:"section-title"},"Top Comparisons:",-1))),O={id:"comparisonsList"};function x(e,t,s,i,o,a){const l=(0,n.up)("TextInformation"),r=(0,n.up)("IDsList"),c=(0,n.up)("MetricButton"),d=(0,n.up)("DistributionDiagram"),u=(0,n.up)("ComparisonsTable");return(0,n.wg)(),(0,n.iD)("div",g,[(0,n._)("div",f,[b,_,(0,n._)("div",v,[(0,n.Wm)(l,{"has-additional-info":e.hasMoreSubmissionPaths,value:e.submissionPathValue,"additional-info-title":"",label:"Directory path"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.overview.submissionFolderPath,(e=>((0,n.wg)(),(0,n.iD)("p",{key:e,title:e},(0,m.zw)(e),9,w)))),128))])),_:1},8,["has-additional-info","value"]),(0,n.Wm)(l,{"has-additional-info":!0,value:e.overview.language,"additional-info-title":"File extensions:",label:"Language"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.overview.fileExtensions,(e=>((0,n.wg)(),(0,n.iD)("p",{key:e},(0,m.zw)(e),1)))),128))])),_:1},8,["value"]),(0,n.Wm)(l,{value:e.overview.matchSensitivity,label:"Match Sensitivity"},null,8,["value"]),(0,n.Wm)(l,{"has-additional-info":!0,value:e.overview.submissionIds.length,"additional-info-title":"Submission IDs:",label:"Submissions"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{ids:e.overview.submissionIds,onIdSent:e.handleId},null,8,["ids","onIdSent"])])),_:1},8,["value"]),(0,n.Wm)(l,{value:e.overview.dateOfExecution,label:"Date of execution"},null,8,["value"]),(0,n.Wm)(l,{value:e.overview.durationOfExecution,label:"Duration (in ms)"},null,8,["value"])]),S]),(0,n._)("div",y,[(0,n._)("div",I,[C,(0,n._)("div",k,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.overview.metrics,((t,s)=>((0,n.wg)(),(0,n.j4)(c,{id:t.metricName,key:t.metricName,"is-selected":e.selectedMetric[s],metric:t,onClick:t=>e.selectMetric(s)},null,8,["id","is-selected","metric","onClick"])))),128))])]),F,(0,n.Wm)(d,{distribution:e.distributions[e.selectedMetricIndex],class:"full-width"},null,8,["distribution"])]),(0,n._)("div",D,[M,(0,n._)("div",O,[(0,n.Wm)(u,{clusters:e.overview.clusters,"top-comparisons":e.topComps[e.selectedMetricIndex]},null,8,["clusters","top-comparisons"])])])])}var Z=s(2262),z=s(6108),P=s(6838);const T=e=>((0,n.dD)("data-v-043c3160"),e=e(),(0,n.Cn)(),e),L={class:"wrapper"},E={class:"text-container"},N={class:"label-text"},H=["title"],A={key:0,alt:"hide info",src:z},W={key:1,alt:"additional info",src:P},j={class:"additional-info-title"},V=T((()=>(0,n._)("hr",null,null,-1)));function q(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",L,[(0,n._)("div",E,[(0,n._)("p",N,(0,m.zw)(e.label),1),(0,n._)("p",{class:(0,m.C_)([{anonymous:e.anonymous},"value-text"]),title:e.anonymous?"":e.value},(0,m.zw)(e.anonymous?"Hidden":e.value),11,H)]),(0,n._)("button",{class:(0,m.C_)([{hidden:!e.hasAdditionalInfo},"collapse-button"]),onClick:t[0]||(t[0]=(...t)=>e.toggleIsCollapsed&&e.toggleIsCollapsed(...t))},[e.isCollapsed?((0,n.wg)(),(0,n.iD)("img",A)):((0,n.wg)(),(0,n.iD)("img",W))],2)]),(0,n._)("div",{class:(0,m.C_)([{hidden:!e.isCollapsed},"additional-info"])},[(0,n._)("p",j,(0,m.zw)(e.additionalInfoTitle),1),(0,n.WI)(e.$slots,"default",{},void 0,!0)],2),V],64)}var B=(0,n.aZ)({name:"TextInformation",props:{label:{type:String,required:!0},value:{required:!0},hasAdditionalInfo:{type:Boolean,default:!1},additionalInfoTitle:{type:String,default:""},anonymous:{type:Boolean,default:!1}},setup(){const e=(0,Z.iH)(!1),t=()=>e.value=!e.value;return{isCollapsed:e,toggleIsCollapsed:t}}});const U=(0,l.Z)(B,[["render",q],["__scopeId","data-v-043c3160"]]);var Y=U;const R={class:"wrapper"};function J(e,t,s,i,o,a){const l=(0,n.up)("BarChart");return(0,n.wg)(),(0,n.iD)("div",R,[(0,n.Wm)(l,{chartData:e.chartData,options:e.options,class:"chart"},null,8,["chartData","options"])])}var K=s(7158),$=s(6300),G=s(4776);$.kL.register(...$.zX),$.kL.register(G.Z);var X=(0,n.aZ)({name:"DistributionDiagram",components:{BarChart:K.vz},props:{distribution:{type:Array,required:!0}},setup(e){let t=(0,Z.iH)(Math.max(...e.distribution));const s=["0-10%","11-20%","21-30%","31-40%","41-50%","51-60%","61-70%","71-80%","81-90%","91-100%"],i={label:"Count",backgroundColor:"rgba(149, 168, 241, 0.5)",borderWidth:2,borderColor:"rgba(149, 168, 241, 1)",tickColor:"#000000"};let o=(0,Z.iH)({labels:s,datasets:[{...i,data:e.distribution}]});const a=(0,Z.iH)({responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{suggestedMax:t.value+5,ticks:{color:"#000000"}},y:{ticks:{color:"#000000"}}},plugins:{datalabels:{color:"#000000",font:{weight:"bold"},anchor:"end",align:"end",clamp:!0},legend:{display:!1}}});return(0,n.YP)((()=>e.distribution),(e=>{o.value={labels:s,datasets:[{...i,data:e}]},t.value=Math.max(...e),a.value.scales.x.suggestedMax=t.value+5})),{chartData:o,options:a}}});const Q=(0,l.Z)(X,[["render",J],["__scopeId","data-v-aa70f1b4"]]);var ee=Q,te=s(164);const se=e=>((0,n.dD)("data-v-5f3c273b"),e=e(),(0,n.Cn)(),e),ie={class:"metric-name"},ne={class:"tooltip"},oe=se((()=>(0,n._)("img",{alt:"?",src:te},null,-1))),ae={class:"tooltiptext"};function le(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",{class:(0,m.C_)(["wrapper",{selected:e.isSelected}])},[(0,n._)("div",null,[(0,n._)("p",ie,(0,m.zw)(e.metric.metricName),1),(0,n._)("div",ne,[oe,(0,n._)("span",ae,(0,m.zw)(e.metric.description),1)])])],2)}var re=(0,n.aZ)({name:"MetricButton",props:{metric:{type:Object,required:!0},isSelected:{type:Boolean,default:!1}},setup(){return{}}});const ce=(0,l.Z)(re,[["render",le],["__scopeId","data-v-5f3c273b"]]);var de=ce,ue=s(7068);const me=e=>((0,n.dD)("data-v-faa442b4"),e=e(),(0,n.Cn)(),e),pe=me((()=>(0,n._)("tr",{class:"head-row"},[(0,n._)("th",null,"No."),(0,n._)("th",null,"Submission 1"),(0,n._)("th"),(0,n._)("th",null,"Submission 2"),(0,n._)("th",null,"Match %")],-1))),he=["onClick"],ge=["onClick"],fe=["onClick"],be=me((()=>(0,n._)("img",{alt:">>",src:ue},null,-1))),_e=[be],ve=["onClick"],we=["onClick"];function Se(e,t,s,i,o,a){const l=(0,n.up)("ClustersList"),r=(0,n.up)("GDialog");return(0,n.wg)(),(0,n.iD)("table",null,[pe,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.topComparisons,((t,s)=>((0,n.wg)(),(0,n.iD)("tr",{key:t.firstSubmissionId+t.secondSubmissionId+t.matchPercentage,class:"selectable"},[(0,n._)("td",{onClick:s=>e.navigateToComparisonView(t.firstSubmissionId,t.secondSubmissionId)},(0,m.zw)(s+1)+". ",9,he),(0,n._)("td",{class:(0,m.C_)({"anonymous-style":e.isAnonymous(t.firstSubmissionId)}),onClick:s=>e.navigateToComparisonView(t.firstSubmissionId,t.secondSubmissionId)},(0,m.zw)(e.isAnonymous(t.firstSubmissionId)?"Hidden":t.firstSubmissionId),11,ge),(0,n._)("td",{onClick:s=>e.navigateToComparisonView(t.firstSubmissionId,t.secondSubmissionId)},_e,8,fe),(0,n._)("td",{class:(0,m.C_)({"anonymous-style":e.isAnonymous(t.secondSubmissionId)}),onClick:s=>e.navigateToComparisonView(t.firstSubmissionId,t.secondSubmissionId)},(0,m.zw)(e.isAnonymous(t.secondSubmissionId)?"Hidden":t.secondSubmissionId),11,ve),(0,n._)("td",null,(0,m.zw)(e.formattedMatchPercentage(t.matchPercentage)),1),(0,n._)("td",null,[e.isInCluster(t.firstSubmissionId,t.secondSubmissionId)?((0,n.wg)(),(0,n.iD)("img",{key:0,alt:">>",src:P,onClick:t=>e.toggleDialog(s)},null,8,we)):(0,n.kq)("",!0)]),(0,n.Wm)(r,{modelValue:e.dialog[s],"onUpdate:modelValue":t=>e.dialog[s]=t},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{clusters:e.getClustersFor(t.firstSubmissionId,t.secondSubmissionId),comparison:t},null,8,["clusters","comparison"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])))),128))])}s(6699);var ye=s(4325);const Ie={class:"wrapper"},Ce={id:"members"},ke={id:"dialog-header"};function Fe(e,t,s,i,o,a){const l=(0,n.up)("ClusterRadarChart"),r=(0,n.up)("GDialog");return(0,n.wg)(),(0,n.iD)("div",Ie,[(0,n._)("h1",null," Clusters for comparison "+(0,m.zw)(e.comparison.firstSubmissionId)+" > "+(0,m.zw)(e.comparison.secondSubmissionId),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.clusters,((s,i)=>((0,n.wg)(),(0,n.iD)("p",{key:i,onClick:t[2]||(t[2]=(...t)=>e.toggleDialog&&e.toggleDialog(...t))},[(0,n.Uk)((0,m.zw)(i+1)+". Members: ",1),(0,n._)("span",Ce,(0,m.zw)(e.getMemberNames(s)),1),(0,n.Uk)(" - Average similarity: "+(0,m.zw)(s.averageSimilarity)+"% ",1),(0,n.Wm)(r,{modelValue:e.dialog,"onUpdate:modelValue":t[1]||(t[1]=t=>e.dialog=t),fullscreen:""},{default:(0,n.w5)((()=>[(0,n._)("div",ke,[(0,n._)("button",{onClick:t[0]||(t[0]=(...t)=>e.toggleDialog&&e.toggleDialog(...t))},"Close")]),(0,n.Wm)(l,{cluster:s},null,8,["cluster"])])),_:2},1032,["modelValue"])])))),128))])}const De=e=>((0,n.dD)("data-v-d7316dac"),e=e(),(0,n.Cn)(),e),Me={class:"wrapper"},Oe={key:0,class:"wrapper"},xe={key:1,class:"no-member"},Ze=De((()=>(0,n._)("span",null,"This cluster has no members.",-1))),ze=[Ze];function Pe(e,t,s,o,a,l){const r=(0,n.up)("RadarChart");return(0,n.wg)(),(0,n.iD)("div",Me,[e.hasNoMember?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",Oe,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedMember=t)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cluster.members.keys(),((e,t)=>((0,n.wg)(),(0,n.iD)("option",{key:t},(0,m.zw)(e),1)))),128))],512),[[i.bM,e.selectedMember]]),(0,n.Wm)(r,{chartData:e.chartData,options:e.options,class:"chart"},null,8,["chartData","options"])])),e.hasNoMember?((0,n.wg)(),(0,n.iD)("div",xe,ze)):(0,n.kq)("",!0)])}const Te={fill:!0,backgroundColor:"rgba(149, 168, 241, 0.5)",borderColor:"rgba(149, 168, 241, 1)",pointBackgroundColor:"rgba(149, 168, 241, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(255, 99, 132)"},Le={legend:{display:!1},scales:{r:{suggestedMin:50,suggestedMax:100}}};$.kL.register(...$.zX),$.kL.register(G.Z);var Ee=(0,n.aZ)({name:"ClusterRadarChart",components:{RadarChart:K.HM},props:{cluster:{type:Object,required:!0}},setup(e){const t=()=>{const t=e.cluster.members.keys().next().value;return c=!t,t},s=t=>{let s=new Array;return e.cluster.members.get(t)?.forEach((e=>s.push(e.matchedWith))),s},i=t=>{let s=new Array;return e.cluster.members.get(t)?.forEach((e=>s.push(o(e.percentage)))),s},o=e=>Math.round(100*(e+Number.EPSILON))/100,a=(0,Z.iH)(t()),l=(0,Z.iH)({labels:s(t()),datasets:[{...Te,label:t(),data:i(t())}]}),r=(0,Z.iH)(Le);let c=!1;return(0,n.YP)((()=>a.value),(e=>{l.value={labels:s(e),datasets:[{...Te,label:e,data:i(e)}]}})),{selectedMember:a,chartData:l,options:r,hasNoMember:c}}});const Ne=(0,l.Z)(Ee,[["render",Pe],["__scopeId","data-v-d7316dac"]]);var He=Ne,Ae=(0,n.aZ)({name:"ClustersList",components:{ClusterRadarChart:He,GDialog:ye.Yf},props:{comparison:{type:Object,required:!0},clusters:{type:Array,required:!0}},setup(){const e=(0,Z.iH)(!1),t=()=>e.value=!e.value,s=e=>{const t=e.members.keys(),s=Array.from(t);let i="";const n=5;return i=s.slice(0,n).join(", "),s.length>n&&(i+=",..."),i};return{dialog:e,toggleDialog:t,getMemberNames:s}}});const We=(0,l.Z)(Ae,[["render",Fe],["__scopeId","data-v-14c6799e"]]);var je=We,Ve=s(3907),qe=(0,n.aZ)({name:"ComparisonsTable",components:{ClustersList:je,GDialog:ye.Yf},props:{topComparisons:{type:Array,required:!0},clusters:{type:Array,required:!0}},setup(e){const t=(0,Ve.oR)();let s=e=>e.toFixed(2);const i=(0,Z.iH)([]);e.topComparisons.forEach((()=>i.value.push(!1)));const n=e=>{i.value[e]=!0},o=(e,s)=>{t.state.single||_s.push({name:"ComparisonView",params:{firstId:e,secondId:s}})},a=(t,s)=>e.clusters.some((e=>e.members.includes(t)&&e.members.includes(s))),l=e=>t.state.anonymous.has(e),r=(t,s)=>{let i=[];return e.topComparisons.forEach((e=>{e.firstSubmissionId.includes(t)&&s.includes(e.secondSubmissionId)?i.push({matchedWith:e.secondSubmissionId,percentage:e.matchPercentage}):e.secondSubmissionId.includes(t)&&s.includes(e.firstSubmissionId)&&i.push({matchedWith:e.firstSubmissionId,percentage:e.matchPercentage})})),i},c=e.clusters.map((e=>{let t=new Map;return e.members.forEach((s=>{let i=e.members.filter((e=>!e.includes(s)));t.set(s,r(s,i))})),{averageSimilarity:e.averageSimilarity,strength:e.strength,members:t}})),d=(e,t)=>c.filter((s=>s.members.has(e)&&s.members.has(t)));return{clustersWithParticipatingMatches:c,dialog:i,isAnonymous:l,getClustersFor:d,toggleDialog:n,formattedMatchPercentage:s,navigateToComparisonView:o,isInCluster:a}}});const Be=(0,l.Z)(qe,[["render",Se],["__scopeId","data-v-faa442b4"]]);var Ue=Be,Ye=s(2482);class Re{constructor(e,t,s,i,n,o,a,l,r,c){(0,Ye.Z)(this,"_submissionFolderPath",void 0),(0,Ye.Z)(this,"_baseCodeFolderPath",void 0),(0,Ye.Z)(this,"_language",void 0),(0,Ye.Z)(this,"_fileExtensions",void 0),(0,Ye.Z)(this,"_matchSensitivity",void 0),(0,Ye.Z)(this,"_submissionIds",void 0),(0,Ye.Z)(this,"_dateOfExecution",void 0),(0,Ye.Z)(this,"_durationOfExecution",void 0),(0,Ye.Z)(this,"_metrics",void 0),(0,Ye.Z)(this,"_clusters",void 0),this._submissionFolderPath=e,this._baseCodeFolderPath=t,this._language=s,this._fileExtensions=i,this._matchSensitivity=n,this._submissionIds=o,this._dateOfExecution=a,this._durationOfExecution=l,this._metrics=r,this._clusters=c}get submissionFolderPath(){return this._submissionFolderPath}get baseCodeFolderPath(){return this._baseCodeFolderPath}get language(){return this._language}get fileExtensions(){return this._fileExtensions}get matchSensitivity(){return this._matchSensitivity}get submissionIds(){return this._submissionIds}get dateOfExecution(){return this._dateOfExecution}get durationOfExecution(){return this._durationOfExecution}get metrics(){return this._metrics}get clusters(){return this._clusters}}class Je{static getOverview(e){const t=e.submission_folder_path,s="",i=e.language,n=e.file_extensions,o=e.match_sensitivity,a=e.submission_ids,l=e.date_of_execution,r=e.execution_time,c=[],d=[];return e.metrics.forEach((e=>{const t=e,s=[];t.topComparisons.forEach((e=>{const t={firstSubmissionId:e.first_submission,secondSubmissionId:e.second_submission,matchPercentage:e.match_percentage};s.push(t)})),c.push({metricName:t.name,metricThreshold:t.threshold,distribution:t.distribution,comparisons:s,description:t.description})})),e.clusters&&e.clusters.forEach((e=>{const t=e,s={averageSimilarity:t.average_similarity,strength:t.strength,members:t.members};d.push(s)})),new Re(t,s,i,n,o,a,l,r,c,d)}}const Ke={class:"container"},$e={class:"column-list"},Ge=["onClick"];function Xe(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",Ke,[(0,n._)("div",$e,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.ids,((t,s)=>((0,n.wg)(),(0,n.iD)("p",{key:s,class:(0,m.C_)({selected:!e.store.state.anonymous.has(t)&&0!==e.store.state.anonymous.size}),onClick:s=>e.$emit("idSent",[t])},(0,m.zw)(t),11,Ge)))),128))]),(0,n._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("idSent",e.ids))},"Hide/Show all")])}const Qe=(0,Ve.MT)({state:{anonymous:new Set,files:{},local:!1,zip:!1,single:!1,fileString:""},mutations:{addAnonymous(e,t){for(let s=0;s<t.length;s++)e.anonymous.add(t[s])},removeAnonymous(e,t){for(let s=0;s<t.length;s++)e.anonymous.delete(t[s])},resetAnonymous(e){e.anonymous=new Set},saveFile(e,t){e.files[t.fileName]=t.data},setLoadingType(e,t){e.local=t.local,e.zip=t.zip,e.single=t.single,e.fileString=t.fileString}}});var et=Qe,tt=(0,n.aZ)({name:"IDsList",props:{ids:{type:Array,required:!0}},setup(e){const t=e.ids;return{savedIds:t,store:et}}});const st=(0,l.Z)(tt,[["render",Xe],["__scopeId","data-v-0be155b7"]]);var it=st,nt=(0,n.aZ)({name:"OverviewView",components:{IDsList:it,ComparisonsTable:Ue,DistributionDiagram:ee,MetricButton:de,TextInformation:Y},setup(){const e=(0,Ve.oR)(),t=(0,n.Fl)((()=>{const t=Object.keys(e.state.files).find((e=>e.endsWith("overview.json")));return void 0!=t?e.state.files[t]:console.log("Could not find overview.json")})),i=()=>{let i;if(e.state.local)try{i=Je.getOverview(s(Object(function(){var e=new Error("Cannot find module '../files/overview.json'");throw e.code="MODULE_NOT_FOUND",e}())))}catch(n){_s.back()}else if(e.state.zip){const e=JSON.parse(t.value);i=Je.getOverview(e)}else e.state.single&&(i=Je.getOverview(JSON.parse(e.state.fileString)));return i};let o=i();const a=t=>{t.length===o.submissionIds.length?e.state.anonymous.size>0?e.commit("resetAnonymous"):e.commit("addAnonymous",t):e.state.anonymous.has(t[0])?e.commit("removeAnonymous",t):0===e.state.anonymous.size?e.commit("addAnonymous",o.submissionIds.filter((e=>e!==t[0]))):e.commit("addAnonymous",t)};let l=(0,Z.iH)(o.metrics.map((()=>!1))),r=(0,Z.iH)(0);l.value[0]=!0;const c=e=>{l.value=l.value.map((()=>!1)),l.value[e]=!0,r.value=e};let d=(0,Z.iH)(o.metrics.map((e=>e.distribution))),u=(0,Z.iH)(o.metrics.map((e=>e.comparisons)));const m=o.submissionFolderPath.length>1,p=m?"Click arrow to see all paths":o.submissionFolderPath[0];return{overview:o,selectedMetricIndex:r,selectedMetric:l,distributions:d,topComps:u,hasMoreSubmissionPaths:m,submissionPathValue:p,handleId:a,selectMetric:c,store:e}}});const ot=(0,l.Z)(nt,[["render",x],["__scopeId","data-v-4854b4d1"]]);var at=ot,lt=s(689),rt=s(5671);const ct=e=>((0,n.dD)("data-v-628a3266"),e=e(),(0,n.Cn)(),e),dt={class:"container"},ut=ct((()=>(0,n._)("img",{alt:"show",src:lt},null,-1))),mt=[ut],pt={class:"title-section"},ht=ct((()=>(0,n._)("h1",null,"JPlag Comparison",-1))),gt=ct((()=>(0,n._)("img",{alt:"hide",src:rt},null,-1))),ft=[gt];function bt(e,t,s,i,o,a){const l=(0,n.up)("TextInformation"),r=(0,n.up)("MatchTable"),c=(0,n.up)("FilesContainer");return(0,n.wg)(),(0,n.iD)("div",dt,[(0,n._)("button",{id:"show-button",class:(0,m.C_)({hidden:!e.hideLeftPanel}),title:"Show sidebar",onClick:t[0]||(t[0]=(...t)=>e.togglePanel&&e.togglePanel(...t))},mt,2),(0,n._)("div",{id:"sidebar",class:(0,m.C_)({hidden:e.hideLeftPanel})},[(0,n._)("div",pt,[ht,(0,n._)("button",{id:"hide-button",title:"Hide sidebar",onClick:t[1]||(t[1]=(...t)=>e.togglePanel&&e.togglePanel(...t))},ft)]),(0,n.Wm)(l,{anonymous:e.isAnonymous(e.firstId),value:e.firstId,label:"Submission 1"},null,8,["anonymous","value"]),(0,n.Wm)(l,{anonymous:e.store.state.anonymous.has(e.secondId),value:e.secondId,label:"Submission 2"},null,8,["anonymous","value"]),(0,n.Wm)(l,{value:e.comparison.match_percentage,label:"Match %"},null,8,["value"]),(0,n.Wm)(r,{id1:e.firstId,id2:e.secondId,matches:e.comparison.allMatches,onMatchSelected:e.showMatch},null,8,["id1","id2","matches","onMatchSelected"])],2),(0,n.Wm)(c,{"container-id":1,files:e.filesOfFirst,matches:e.comparison.matchesInFirstSubmission,"files-owner":"Submission 1",onToggleCollapse:e.toggleCollapseFirst,onLineSelected:e.showMatchInSecond},null,8,["files","matches","onToggleCollapse","onLineSelected"]),(0,n.Wm)(c,{"container-id":2,files:e.filesOfSecond,matches:e.comparison.matchesInSecondSubmissions,"files-owner":"Submission 2",onToggleCollapse:e.toggleCollapseSecond,onLineSelected:e.showMatchInFirst},null,8,["files","matches","onToggleCollapse","onLineSelected"])])}function _t(e,t,s){return String(e).concat(t).concat(String(s))}function vt(e){if(e.name.includes(".")){const t=e.name.split(".");return t[t.length-1]}return""}const wt=e=>((0,n.dD)("data-v-137e1690"),e=e(),(0,n.Cn)(),e),St={class:"match-table-container"},yt=wt((()=>(0,n._)("tr",null,[(0,n._)("th",null,"Submission 1"),(0,n._)("th",null,"Submission 2")],-1))),It=wt((()=>(0,n._)("tr",null,[(0,n._)("th",null,"File 1"),(0,n._)("th",null,"File 2"),(0,n._)("th",null,"Tokens")],-1))),Ct=["onClick"],kt={class:"td-content"},Ft={class:"td-content"};function Dt(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",St,[(0,n._)("table",null,[yt,It,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.matches,((t,s)=>((0,n.wg)(),(0,n.iD)("tr",{key:String(s).concat(t.startInFirst).concat(t.startInSecond),style:(0,m.j5)({background:t.color}),onClick:s=>e.$emit("matchSelected",s,t)},[(0,n._)("td",null,[(0,n._)("div",kt,[(0,n._)("p",null,(0,m.zw)(t.firstFile),1),(0,n._)("p",null,"("+(0,m.zw)(t.startInFirst)+" - "+(0,m.zw)(t.endInFirst)+")",1)])]),(0,n._)("td",null,[(0,n._)("div",Ft,[(0,n._)("p",null,(0,m.zw)(t.secondFile),1),(0,n._)("p",null,"("+(0,m.zw)(t.startInSecond)+" - "+(0,m.zw)(t.endInSecond)+")",1)])]),(0,n._)("td",null,(0,m.zw)(t.tokens),1)],12,Ct)))),128))])])}var Mt=(0,n.aZ)({name:"MatchTable",props:{matches:{type:Array},id1:{type:String},id2:{type:String}},setup(){return{}}});const Ot=(0,l.Z)(Mt,[["render",Dt],["__scopeId","data-v-137e1690"]]);var xt=Ot;class Zt{constructor(e,t,s){(0,Ye.Z)(this,"_firstSubmissionId",void 0),(0,Ye.Z)(this,"_secondSubmissionId",void 0),(0,Ye.Z)(this,"_match_percentage",void 0),(0,Ye.Z)(this,"_filesOfFirstSubmission",void 0),(0,Ye.Z)(this,"_filesOfSecondSubmission",void 0),(0,Ye.Z)(this,"_colors",void 0),(0,Ye.Z)(this,"_allMatches",void 0),(0,Ye.Z)(this,"_matchesInFirstSubmission",void 0),(0,Ye.Z)(this,"_matchesInSecondSubmissions",void 0),this._firstSubmissionId=e,this._secondSubmissionId=t,this._match_percentage=s,this._filesOfFirstSubmission=new Map,this._filesOfSecondSubmission=new Map,this._colors=[],this._allMatches=[],this._matchesInFirstSubmission=new Map,this._matchesInSecondSubmissions=new Map}get filesOfFirstSubmission(){return this._filesOfFirstSubmission}set filesOfFirstSubmission(e){this._filesOfFirstSubmission=e}get filesOfSecondSubmission(){return this._filesOfSecondSubmission}set filesOfSecondSubmission(e){this._filesOfSecondSubmission=e}get colors(){return this._colors}set colors(e){this._colors=e}get allMatches(){return this._allMatches}set allMatches(e){this._allMatches=e}get matchesInFirstSubmission(){return this._matchesInFirstSubmission}set matchesInFirstSubmission(e){this._matchesInFirstSubmission=e}get matchesInSecondSubmissions(){return this._matchesInSecondSubmissions}set matchesInSecondSubmissions(e){this._matchesInSecondSubmissions=e}get firstSubmissionId(){return this._firstSubmissionId}get secondSubmissionId(){return this._secondSubmissionId}get match_percentage(){return this._match_percentage}}class zt{static getComparison(e){const t=this.convertToFilesByName(e.files_of_first_submission),s=this.convertToFilesByName(e.files_of_second_submission),i=e.matches,n=this.generateColorsForMatches(i.length),o=i.map(((e,t)=>this.mapMatch(e,n[t]))),a=this.groupMatchesByFileName(o,1),l=this.groupMatchesByFileName(o,2),r=new Zt(e.first_submission_id,e.second_submission_id,e.match_percentage);return r.filesOfFirstSubmission=t,r.filesOfSecondSubmission=s,r.colors=n,r.allMatches=o,r.matchesInFirstSubmission=a,r.matchesInSecondSubmissions=l,r}static convertToFilesByName(e){const t=new Map;return e.forEach((e=>{t.get(e.file_name)||t.set(e.file_name,{lines:[],collapsed:!1}),t.set(e.file_name,{lines:e.lines,collapsed:!1})})),t}static groupMatchesByFileName(e,t){const s=new Map;return e.forEach((e=>{const i=1===t?e.firstFile:e.secondFile;if(s.get(i)||s.set(i,[]),1===t){const t={start:e.startInFirst,end:e.endInFirst,linked_panel:2,linked_file:e.secondFile,linked_line:e.startInSecond,color:e.color};s.get(i)?.push(t)}else{const t={start:e.startInSecond,end:e.endInSecond,linked_panel:1,linked_file:e.firstFile,linked_line:e.startInFirst,color:e.color};s.get(i)?.push(t)}})),s}static generateColorsForMatches(e){const t=[],s=Math.trunc(360/e);for(let i=0;i<e;i++){const e=i*s;t.push(`hsla(${e}, 80%, 50%, 0.3)`)}return t}static mapMatch(e,t){return{firstFile:e.first_file_name,secondFile:e.second_file_name,startInFirst:e.start_in_first,endInFirst:e.end_in_first,startInSecond:e.start_in_second,endInSecond:e.end_in_second,tokens:e.tokens,color:t}}}const Pt={class:"files-container"};function Tt(e,t,s,i,o,a){const l=(0,n.up)("CodePanel"),r=(0,n.up)("VueDraggableNext");return(0,n.wg)(),(0,n.iD)("div",Pt,[(0,n._)("h1",null,"Files of "+(0,m.zw)(e.filesOwner),1),(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.files.keys(),((t,s)=>((0,n.wg)(),(0,n.j4)(l,{key:t.concat(s.toString()),collapse:e.files.get(t)?.collapsed,"file-index":s,lines:e.files.get(t)?.lines?e.files.get(t)?.lines:[],matches:e.matches.get(t)?e.matches.get(t):[],"panel-id":e.containerId,title:t,onToggleCollapse:s=>e.$emit("toggle-collapse",t),onLineSelected:e.lineSelected},null,8,["collapse","file-index","lines","matches","panel-id","title","onToggleCollapse","onLineSelected"])))),128))])),_:1})])}const Lt=["id"],Et={class:"file-title"},Nt={style:{width:"90%"}},Ht={key:0,alt:"hide info",src:z},At={key:1,alt:"additional info",src:P};function Wt(e,t,s,i,o,a){const l=(0,n.up)("LineOfCode");return(0,n.wg)(),(0,n.iD)("div",{id:e.panelId.toString().concat(e.title).concat(e.fileIndex.toString()),class:"code-panel-container"},[(0,n._)("div",Et,[(0,n._)("p",Nt,(0,m.zw)(e.title),1),(0,n._)("button",{class:"collapse-button",style:{width:"10%"},onClick:t[0]||(t[0]=t=>e.$emit("toggleCollapse"))},[e.collapse?((0,n.wg)(),(0,n.iD)("img",Ht)):((0,n.wg)(),(0,n.iD)("img",At))])]),(0,n._)("div",{class:(0,m.C_)([{hidden:!e.collapse},"code-container"])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.lines,((t,s)=>((0,n.wg)(),(0,n.j4)(l,{id:String(e.panelId).concat(e.title).concat(s),key:s,color:e.coloringArray[s],"is-first":e.isFirst[s],"is-last":e.isLast[s],"line-number":s+1,text:t,visible:e.collapse,onClick:t=>e.$emit("lineSelected",t,e.linksArray[s].panel,e.linksArray[s].file,e.linksArray[s].line)},null,8,["id","color","is-first","is-last","line-number","text","visible","onClick"])))),128))],2)],8,Lt)}const jt=["id"];function Vt(e,t,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",{class:(0,m.C_)([{"first-line":e.isFirst,"last-line":e.isLast,visible:e.visible},"line-wrap"]),style:(0,m.j5)({background:e.color})},[(0,n._)("pre",{id:e.text,ref:"lineRef",class:(0,m.C_)([{"match-line":"#ECECEC"!==e.color},"java"])},(0,m.zw)(e.lineNumber)+" "+(0,m.zw)(e.text),11,jt)],6)}var qt=s(637),Bt=(0,n.aZ)({name:"LineOfCode",props:{visible:{type:Boolean,required:!0},text:{type:String,required:!0},lineNumber:{type:Number,required:!0},color:{required:!0},fileIndex:{type:Number},isFirst:{type:Boolean},isLast:{type:Boolean}},setup(e){let t=!1,s=(0,Z.iH)(null);return(0,n.ic)((()=>{e.visible&&!t&&(qt.Z.highlightElement(s.value),t=!0)})),{lineRef:s}}});const Ut=(0,l.Z)(Bt,[["render",Vt],["__scopeId","data-v-9fe1d740"]]);var Yt=Ut,Rt=(0,n.aZ)({name:"CodePanel",components:{LineOfCode:Yt},props:{title:{type:String},fileIndex:{type:Number},lines:{type:Array,required:!0},matches:{type:Array},panelId:{type:Number},collapse:{type:Boolean}},setup(e){const t=(0,Z.iH)({}),s=(0,Z.iH)({}),i=(0,Z.iH)({}),n=(0,Z.iH)({});e.matches.forEach((e=>{for(let i=e.start;i<=e.end;i++)t.value[i]=e.color,s.value[i]={panel:e.linked_panel,file:e.linked_file,line:e.linked_line};n.value[e.start]=!0,i.value[e.end]=!0}));for(let o=0;o<e.lines.length;o++)t.value[o]||(t.value[o]="#FFFFFF",s.value[o]="-1",n.value[o]=!1,i.value[o]=!1);return{coloringArray:t,linksArray:s,isFirst:n,isLast:i}}});const Jt=(0,l.Z)(Rt,[["render",Wt],["__scopeId","data-v-4808d412"]]);var Kt=Jt,$t=s(8496),Gt=(0,n.aZ)({name:"FilesContainer",components:{CodePanel:Kt,VueDraggableNext:$t.J},props:{containerId:{type:Number,required:!0},filesOwner:{type:String,required:!0},files:{type:Map,required:!0},matches:{type:Map,required:!0}},setup(e,{emit:t}){const s=(e,s,i,n)=>{t("lineSelected",e,s,i,n)};return{lineSelected:s}}});const Xt=(0,l.Z)(Gt,[["render",Tt],["__scopeId","data-v-6f052d16"]]);var Qt=Xt,es=(0,n.aZ)({name:"ComparisonView",components:{FilesContainer:Qt,MatchTable:xt,TextInformation:Y},props:{firstId:{type:String,required:!0},secondId:{type:String,required:!0}},setup(e){const t=(0,Ve.oR)(),s=(0,u.tv)();e.firstId.concat("-").concat(e.secondId),e.firstId.concat("-").concat(e.secondId);let i;if(t.state.local)try{i=zt.getComparison(Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(g){try{i=zt.getComparison(Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(g){s.back()}}else if(t.state.zip){const s=(e,s)=>{const i=Object.keys(t.state.files).find((t=>t.endsWith(e.concat("-").concat(s).concat(".json"))||t.endsWith(s.concat("-").concat(e).concat(".json"))));return void 0!=i?t.state.files[i]:console.log("Could not find comparison file.")};let n=s(e.firstId,e.secondId);n&&(i=zt.getComparison(JSON.parse(n)))}else t.state.single&&(i=zt.getComparison(JSON.parse(t.state.fileString)));if(!i)return void console.warn("Could not build comparison file");const n=(0,Z.iH)(i.filesOfFirstSubmission),o=(0,Z.iH)(i.filesOfSecondSubmission),a=e=>{const t=n.value.get(e);t&&(t.collapsed=!t.collapsed)},l=e=>{const t=o.value.get(e);t&&(t.collapsed=!t.collapsed)},r=(e,t,s,i)=>{n.value.get(s)?.collapsed||a(s),document.getElementById(_t(t,s,i))?.scrollIntoView()},c=(e,t,s,i)=>{o.value.get(s)?.collapsed||l(s),document.getElementById(_t(t,s,i))?.scrollIntoView()},d=(e,t)=>{r(e,1,t.firstFile,t.startInFirst),c(e,2,t.secondFile,t.startInSecond)},m=e=>t.state.anonymous.has(e),p=(0,Z.iH)(!0),h=()=>{p.value=!p.value};return{comparison:i,filesOfFirst:n,filesOfSecond:o,hideLeftPanel:p,toggleCollapseFirst:a,toggleCollapseSecond:l,showMatchInFirst:r,showMatchInSecond:c,showMatch:d,togglePanel:h,isAnonymous:m,store:t}}});const ts=(0,l.Z)(es,[["render",bt],["__scopeId","data-v-628a3266"]]);var ss=ts;const is=e=>((0,n.dD)("data-v-133abbe0"),e=e(),(0,n.Cn)(),e),ns=is((()=>(0,n._)("img",{alt:"JPlag",src:p},null,-1))),os=is((()=>(0,n._)("h1",null,"JPlag Report Viewer",-1))),as=is((()=>(0,n._)("h2",null,"Select an overview or comparison file or a zip to display.",-1))),ls=is((()=>(0,n._)("div",{class:"drop-container"},[(0,n._)("p",null,"Drop a .json or .zip on this page")],-1))),rs={key:0,class:"local-files-container"},cs=is((()=>(0,n._)("p",{class:"local-files-text"},"Detected local files!",-1)));function ds(e,t,s,o,a,l){return(0,n.wg)(),(0,n.iD)("div",{class:"container",onDragover:t[1]||(t[1]=(0,i.iM)((()=>{}),["prevent"])),onDrop:t[2]||(t[2]=(0,i.iM)(((...t)=>e.uploadFile&&e.uploadFile(...t)),["prevent"]))},[ns,os,as,ls,e.hasLocalFile?((0,n.wg)(),(0,n.iD)("div",rs,[cs,(0,n._)("button",{class:"local-files-button",onClick:t[0]||(t[0]=(...t)=>e.continueWithLocal&&e.continueWithLocal(...t))}," Continue with local files ")])):(0,n.kq)("",!0)],32)}var us=s(5733),ms=s.n(us),ps=(0,n.aZ)({name:"FileUploadView",setup(){let e;try{s(Object(function(){var e=new Error("Cannot find module '../files/overview.json'");throw e.code="MODULE_NOT_FOUND",e}())),e=!0}catch(r){console.log(r),e=!1}const t=()=>{_s.push({name:"OverviewView"})},i=(e,t)=>{_s.push({name:"ComparisonView",params:{firstId:e,secondId:t}})},n=e=>{ms().loadAsync(e).then((async e=>{for(const t of Object.keys(e.files))console.log(t),await e.files[t].async("string").then((e=>{et.commit("saveFile",{fileName:t,data:e})}));et.commit("setLoadingType",{local:!1,zip:!0,single:!1,fileString:""}),t()}))},o=e=>{let s=JSON.parse(e);s["submission_folder_path"]?(et.commit("setLoadingType",{local:!1,zip:!1,single:!0,fileString:e}),t()):s["first_submission_id"]&&s["second_submission_id"]&&(et.commit("setLoadingType",{local:!1,zip:!1,single:!0,fileString:e}),i(s["first_submission_id"],s["second_submission_id"]))},a=e=>{let t=e.dataTransfer?.files;if(!t)return;let s=[...t];if(s.length>1||0===s.length)return;let i=new FileReader;i.onload=e=>{let t=vt(s[0]);if("zip"===t)n(s[0]);else if("json"===t){let t=e.target?.result;if(!t)return;"string"===typeof t&&o(t)}},i.readAsText(s[0])},l=()=>{et.commit("setLoadingType",{local:!0,zip:!1,single:!1,fileString:""}),t()};return{continueWithLocal:l,uploadFile:a,hasLocalFile:e}}});const hs=(0,l.Z)(ps,[["render",ds],["__scopeId","data-v-133abbe0"]]);var gs=hs;const fs=[{path:"/",name:"FileUploadView",component:gs},{path:"/overview",name:"OverviewView",component:at},{path:"/comparison",name:"ComparisonView",component:ss,props:!0}],bs=(0,u.p7)({history:(0,u.PO)("/JPlag"),routes:fs});var _s=bs;s(6233);(0,i.ri)(d).use(_s).use(et).mount("#app")},7068:function(e,t,s){e.exports=s.p+"img/double_arrow_black_18dp.138ba432.svg"},689:function(e,t,s){e.exports=s.p+"img/double_arrow_black_24dp.6ffebc17.svg"},164:function(e,t,s){e.exports=s.p+"img/help_outline_black_18dp.92160fb9.svg"},6838:function(e,t,s){e.exports=s.p+"img/keyboard_double_arrow_down_black_18dp.1dc03f43.svg"},5671:function(e,t,s){e.exports=s.p+"img/keyboard_double_arrow_left_black_24dp.5c0d792d.svg"},6108:function(e,t,s){e.exports=s.p+"img/keyboard_double_arrow_up_black_18dp.5defbec8.svg"},5174:function(e,t,s){e.exports=s.p+"img/logo-nobg.fe65cd9a.png"}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,i,n,o){if(!i){var a=1/0;for(d=0;d<e.length;d++){i=e[d][0],n=e[d][1],o=e[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&o||a>=o)&&Object.keys(s.O).every((function(e){return s.O[e](i[r])}))?i.splice(r--,1):(l=!1,o<a&&(a=o));if(l){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,n,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/JPlag/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,o,a=i[0],l=i[1],r=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(r)var d=r(s)}for(t&&t(i);c<a.length;c++)o=a[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},i=self["webpackChunkreport_viewer"]=self["webpackChunkreport_viewer"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(768)}));i=s.O(i)})();
//# sourceMappingURL=app.7268889d.js.map